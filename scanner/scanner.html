<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="author" content="fR0DDY">
  <title>Code Scanner Demo</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">
  <link rel="stylesheet" href="../css/app.css">
  <script type="text/javascript" src="js/instascan.min.js"></script>
</head>

<body style="padding-top: 0px;">
  <div class="navbar navbar-inverse navbar-fixed-top app-nav">
    <div class="container">
      <div class="navbar-header">
        <a href="#" class="navbar-brand">Code Scanner Demo</a>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm offset-sm-2">
        <video id="preview"></video>
      </div>
    </div>
    <div class="row">
      <div class="col-sm offset-sm-3">
        <img id="image" src="./img/KBC_Default.png" class="img-fluid" alt="Creative Flow">
      </div>
    </div>
  </div>
  <script type="text/javascript">
    let scanner = new Instascan.Scanner({
      video: document.getElementById('preview')
    });
    scanner.addListener('scan', function (content) {
      console.log(content);
      if (content === 'Test1') {
        document.getElementById('image').src = './img/K1.png';
      } else if (content === 'Test2') {
        document.getElementById('image').src = './img/K1.png';
      } else if (content === 'Test3') {
        document.getElementById('image').src = './img/K1.png';
      } else if (content === 'Test4') {
        document.getElementById('image').src = './img/K1.png';
      } else if (content === 'Test5') {
        document.getElementById('image').src = './img/K1.png';
      } else {
        document.getElementById('image').src = './img/KBC_Default.png';
      }
    });
    Instascan.Camera.getCameras().then(function (cameras) {
      if (cameras.length > 1) {
        scanner.start(cameras[1]);
      } else if (cameras.length > 0) {
        scanner.start(cameras[0]);
      } else {
        console.error('No cameras found.');
      }
    }).catch(function (e) {
      console.error(e);
    });
  </script>
</body>

</html>